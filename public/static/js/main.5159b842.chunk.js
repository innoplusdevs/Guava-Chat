(this["webpackJsonpreact-chat"]=this["webpackJsonpreact-chat"]||[]).push([[0],{43:function(e,t,a){"use strict";a.r(t);var s=a(37),n=a(38),c=a(14),r=a(42),l=a(41),i=a(6),o=a(5),u=a.n(o),j=a(39),d=a.n(j),b=(a(48),a(40)),m=a(0),h=Object(b.io)();function g(){var e=new Date;return("0"+e.getHours()).substr(-2,2)+":"+("0"+e.getMinutes()).substr(-2,2)}var p=function(){var e=Object(o.useState)(""),t=Object(i.a)(e,2),a=t[0],s=t[1],n=Object(o.useState)([]),c=Object(i.a)(n,2),r=c[0],l=c[1];h.on("id",(function(e){console.log("id recibido",h.id,"socket",e)})),h.on("chat message",(function(e){l(e),console.log("set Messages")}));var u;return r.length&&(u=Object(m.jsx)(N,{allMessages:r,userId:h.id})),a?Object(m.jsxs)("div",{className:"wrapper",children:[Object(m.jsx)("div",{className:"contacts",children:Object(m.jsx)(O,{})}),Object(m.jsx)("div",{className:"chat",children:u}),Object(m.jsx)(v,{parentCallback:function(e){console.log(h.id),e&&h.emit("chat message",e,a,h.id,g())}})]}):Object(m.jsx)(I,{setUsername:s})},v=function(e){Object(r.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).onTrigger=function(e){n.props.parentCallback(n.state.value),n.setState({value:""}),e.preventDefault()},n.state={value:""},n.handleChange=n.handleChange.bind(Object(c.a)(n)),n.onTrigger=n.onTrigger.bind(Object(c.a)(n)),n}return Object(n.a)(a,[{key:"handleChange",value:function(e){this.setState({value:e.target.value}),e.preventDefault()}},{key:"handleEnter",value:function(e){"Enter"===e.code&&e.ctrlKey&&(e.preventDefault(),this.props.parentCallback(e.target.value.trim(/(\s|\n|\r)/)),this.setState({value:""}))}},{key:"render",value:function(){var e=this;return Object(m.jsxs)("form",{id:"form",onSubmit:this.onTrigger,children:[Object(m.jsx)("textarea",{id:"input",placeholder:"Your message",autoComplete:"off",type:"text",value:this.state.value,onChange:this.handleChange,onKeyUp:function(t){return e.handleEnter(t)}}),Object(m.jsx)("button",{id:"sendButton"})]})}}]),a}(u.a.Component),O=function(){var e=Object(o.useState)([]),t=Object(i.a)(e,2),a=t[0],s=t[1];return h.on("user join",(function(e){s(e)})),Object(m.jsx)(f,{contacts:a})};function f(e){var t=e.contacts.map((function(e){var t=Object(i.a)(e,1)[0];return Object(m.jsx)(x,{value:t},t)}));return Object(m.jsxs)("ul",{id:"Contacts-List",children:[" ",t," "]})}function x(e){var t=g(),a=e.value.trim(" ")[0].toUpperCase();return Object(m.jsxs)("li",{className:"people",children:[Object(m.jsx)("div",{className:"PeopleImage",children:a}),Object(m.jsx)("div",{className:"PeopleInfo",children:Object(m.jsxs)("span",{children:[Object(m.jsxs)("p",{className:"PeopleName",children:[" ",e.value]}),Object(m.jsxs)("p",{className:"People-Date",children:[" ",t," "]})]})})]})}function N(e){var t=e.allMessages,a=e.userId;console.log(t,"allMessages"),console.log(a,"userId");var s=t.map((function(e){var t=Object(i.a)(e,4),s=t[0],n=t[1],c=t[2],r=t[3];return Object(m.jsx)(C,{value:s,activePeople:n,messageId:c,userId:a,time:r},s)}));return console.log("messages list"),Object(m.jsxs)("ul",{id:"messages",children:[" ",s," "]})}function C(e){var t,a=e.activePeople[0].trim(" ")[0].toUpperCase();return t=e.messageId===e.userId?"Me":"Other",Object(m.jsxs)("li",{className:t,children:["Other"===t&&Object(m.jsx)("div",{className:"PeopleImage",children:a}),Object(m.jsxs)("span",{children:[Object(m.jsx)("p",{className:"Message-User item",children:e.activePeople}),Object(m.jsx)("p",{className:"Text item",children:e.value}),Object(m.jsx)("p",{className:"Message-Date",children:e.time})]})]})}var I=function(e){var t=e.setUsername,a=Object(o.useState)(""),s=Object(i.a)(a,2),n=s[0],c=s[1];return Object(m.jsxs)("div",{className:"Login",children:[Object(m.jsx)("h1",{children:"Guava Chat"}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n.length<1||n.length>10?document.getElementById("LoginError").className="Show":(sessionStorage.setItem("username",n),h.emit("user join",n),t(n))},className:"LoginForm",children:[Object(m.jsx)("input",{className:"LoginInput",type:"text",placeholder:"Your username",autoComplete:"off",onChange:function(e){e.preventDefault(),c(e.target.value),document.getElementById("LoginError").className="Hide"},value:n}),Object(m.jsx)("button",{className:"LoginSubmit",type:"submit",children:"Login"})]}),Object(m.jsx)("span",{id:"LoginError",className:"Hide",children:"*Username must be between one and ten characters"})]})};d.a.render(Object(m.jsx)(p,{}),document.getElementById("root"))},48:function(e,t,a){}},[[43,1,2]]]);
//# sourceMappingURL=main.5159b842.chunk.js.map