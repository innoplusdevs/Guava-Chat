(this["webpackJsonpreact-chat"]=this["webpackJsonpreact-chat"]||[]).push([[0],{43:function(e,t,s){"use strict";s.r(t);var a=s(37),n=s(38),c=s(14),r=s(42),l=s(41),o=s(6),i=s(5),u=s.n(i),j=s(39),b=s.n(j),d=(s(48),s(40)),m=s(0),h=Object(d.io)();function g(){var e=new Date;return("0"+e.getHours()).substr(-2,2)+":"+("0"+e.getMinutes()).substr(-2,2)}var p=function(){var e=Object(i.useState)(""),t=Object(o.a)(e,2),s=t[0],a=t[1],n=Object(i.useState)([]),c=Object(o.a)(n,2),r=c[0],l=c[1],u=Object(i.useState)(""),j=Object(o.a)(u,2),b=j[0],d=j[1];h.on("id",(function(e){d(e),console.log("id recibido",b,"socket",e)})),h.on("chat message",(function(e){l(e),console.log("set Messages")}));var g;return r.length&&(g=Object(m.jsx)(N,{allMessages:r,userId:b})),s?Object(m.jsxs)("div",{className:"wrapper",children:[Object(m.jsx)("div",{className:"contacts",children:Object(m.jsx)(v,{})}),Object(m.jsx)("div",{className:"chat",children:g}),Object(m.jsx)(O,{parentCallback:function(e){console.log(b),e&&(h.emit("chat message",e,s,b),console.log("emit Data"))}})]}):Object(m.jsx)(C,{setUsername:a})},O=function(e){Object(r.a)(s,e);var t=Object(l.a)(s);function s(e){var n;return Object(a.a)(this,s),(n=t.call(this,e)).onTrigger=function(e){n.props.parentCallback(n.state.value),n.setState({value:""}),e.preventDefault()},n.state={value:""},n.handleChange=n.handleChange.bind(Object(c.a)(n)),n.onTrigger=n.onTrigger.bind(Object(c.a)(n)),n}return Object(n.a)(s,[{key:"handleChange",value:function(e){this.setState({value:e.target.value}),e.preventDefault()}},{key:"handleEnter",value:function(e){"Enter"===e.code&&e.ctrlKey&&(e.preventDefault(),this.props.parentCallback(e.target.value.trim(/(\s|\n|\r)/)),this.setState({value:""}))}},{key:"render",value:function(){var e=this;return Object(m.jsxs)("form",{id:"form",onSubmit:this.onTrigger,children:[Object(m.jsx)("textarea",{id:"input",placeholder:"Your message",autoComplete:"off",type:"text",value:this.state.value,onChange:this.handleChange,onKeyUp:function(t){return e.handleEnter(t)}}),Object(m.jsx)("button",{id:"sendButton"})]})}}]),s}(u.a.Component),v=function(){var e=Object(i.useState)([]),t=Object(o.a)(e,2),s=t[0],a=t[1];return h.on("user join",(function(e){a(e)})),Object(m.jsx)(f,{contacts:s})};function f(e){var t=e.contacts.map((function(e){var t=Object(o.a)(e,1)[0];return Object(m.jsx)(x,{value:t},t)}));return Object(m.jsxs)("ul",{id:"Contacts-List",children:[" ",t," "]})}function x(e){var t=g(),s=e.value.trim(" ")[0].toUpperCase();return Object(m.jsxs)("li",{className:"people",children:[Object(m.jsx)("div",{className:"PeopleImage",children:s}),Object(m.jsx)("div",{className:"PeopleInfo",children:Object(m.jsxs)("span",{children:[Object(m.jsxs)("p",{className:"PeopleName",children:[" ",e.value]}),Object(m.jsxs)("p",{className:"People-Date",children:[" ",t," "]})]})})]})}function N(e){var t=e.allMessages,s=e.userId;console.log(t,"allMessages"),console.log(s,"userId");var a=t.map((function(e){var t=Object(o.a)(e,3),a=t[0],n=t[1],c=t[2];return Object(m.jsx)(I,{value:a,activePeople:n,messageId:c,userId:s},a)}));return console.log("messages list"),Object(m.jsxs)("ul",{id:"messages",children:[" ",a," "]})}function I(e){var t,s=g(),a=e.activePeople[0].trim(" ")[0].toUpperCase();return console.log(e.messageId,e.userId),t=e.messageId===e.userId?"Me":"Other",Object(m.jsxs)("li",{className:t,children:[Object(m.jsx)("div",{className:"PeopleImage",children:a}),Object(m.jsxs)("span",{children:[Object(m.jsx)("p",{className:"Message-User item",children:e.activePeople}),Object(m.jsx)("p",{className:"Text item",children:e.value}),Object(m.jsx)("p",{className:"Message-Date",children:s})]})]})}var C=function(e){var t=e.setUsername,s=Object(i.useState)(""),a=Object(o.a)(s,2),n=a[0],c=a[1];return Object(m.jsxs)("div",{className:"Login",children:[Object(m.jsx)("h1",{children:"Guava Chat"}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n.length<1||n.length>10?document.getElementById("LoginError").className="Show":(sessionStorage.setItem("username",n),h.emit("user join",n),t(n))},className:"LoginForm",children:[Object(m.jsx)("input",{className:"LoginInput",type:"text",placeholder:"Your username",autoComplete:"off",onChange:function(e){e.preventDefault(),c(e.target.value),document.getElementById("LoginError").className="Hide"},value:n}),Object(m.jsx)("button",{className:"LoginSubmit",type:"submit",children:"Login"})]}),Object(m.jsx)("span",{id:"LoginError",className:"Hide",children:"*Username must be between one and ten characters"})]})};b.a.render(Object(m.jsx)(p,{}),document.getElementById("root"))},48:function(e,t,s){}},[[43,1,2]]]);
//# sourceMappingURL=main.2924974c.chunk.js.map